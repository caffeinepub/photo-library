{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 11,
  "summary": "Extend “Photo Library” with fast, non-AI local search on the Home screen (matching album names, photo captions, and filenames when available), add per-photo editable captions stored in the backend (edited from the full-screen viewer), add a generated cartoonish old-camera favicon, and create checkpoint PHOTO_APP_STAGE_3_SEARCH when complete.",
  "architectural_notes": [
    "Mobile-first layout; keep UI minimal and fast using simple components",
    "Handle upload errors and show a basic message",
    "Upload flow must be additive: selecting/uploading new photos must not remove previously uploaded photos; support an accumulating pre-upload selection preview.",
    "Albums must be simple and limited to spec (no tags, AI search, sharing, smart albums, etc.)",
    "A photo can belong to 0..N albums and must still appear in the main library grid (album membership is non-destructive)",
    "Create checkpoint PHOTO_APP_STAGE_2_ALBUMS after implementing Albums",
    "Albums: support user-selected album cover photo from album detail view via an \"Album Cover Photo\" action; if the chosen cover photo is removed from the album, auto-fallback to the first photo in the album until user reselects.",
    "Search: add a Home search bar that performs fast, non-AI, client-side filtering over already-loaded photos/albums (no server-side search).",
    "Captions: captions are a persisted per-photo backend text field editable from the full-screen viewer."
  ],
  "known_issues": [],
  "isFixRequest": false,
  "imageRequirements": "## Required Images\n- Cartoonish old camera icon with simple bold outlines and minimal shading, transparent background (favicon-old-camera.dim_512x512.png)",
  "existing_features": [
    {
      "id": "feature-implement-authentication-using-internet-identity-allow-users-to-sign-in-and-sign-out-and-gate-the-app-so-unauthenticated-users-cannot-access-the-photo-gallery-screens",
      "title": "Implement authentication using Internet Identity: allow users to sign in and sign out, and gate the app so unauthenticated users cannot access the photo gallery screens.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-build-the-mobile-first-home-screen-ui-show-a-minimal-photo-grid-newest-first-for-the-signed-in-user-with-pagination-or-infinite-scroll-to-load-more",
      "title": "Build the mobile-first Home screen UI: show a minimal photo grid (newest first) for the signed-in user, with pagination or infinite scroll to load more.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-upload-button-on-the-home-screen-that-lets-a-user-pick-multiple-image-files-and-upload-them-handle-upload-failures-by-showing-a-basic-english-error-message",
      "title": "Add an “Upload” button on the Home screen that lets a user pick multiple image files and upload them; handle upload failures by showing a basic English error message.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-full-screen-photo-viewer-tapping-a-photo-in-the-grid-opens-a-full-screen-view-with-next-previous-navigation-through-the-user-s-photos",
      "title": "Implement a full-screen photo viewer: tapping a photo in the grid opens a full-screen view with next/previous navigation through the user’s photos.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-delete-action-in-the-full-screen-viewer-that-deletes-the-currently-viewed-photo-and-updates-the-ui-accordingly-remove-from-viewer-flow-and-grid",
      "title": "Add a Delete action in the full-screen viewer that deletes the currently viewed photo and updates the UI accordingly (remove from viewer flow and grid).",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-a-coherent-minimal-mobile-first-visual-theme-colors-typography-spacing-and-keep-interactions-fast-and-simple-do-not-add-albums-tags-ai-search-or-other-extra-features",
      "title": "Apply a coherent, minimal, mobile-first visual theme (colors, typography, spacing) and keep interactions fast and simple; do not add albums, tags, AI search, or other extra features.",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-upload-ui-flow-so-selecting-photos-multiple-times-adds-to-an-accumulating-pending-upload-selection-does-not-replace-prior-pending-selections-and-display-previews-of-all-pending-photos-before-the-user-performs-the-upload",
      "title": "Update the upload UI/flow so selecting photos multiple times adds to an accumulating “pending upload” selection (does not replace prior pending selections), and display previews of all pending photos before the user performs the upload.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-upload-action-only-uploads-the-currently-pending-selection-clears-the-pending-preview-list-on-successful-upload-and-does-not-remove-any-previously-uploaded-photos-from-the-gallery-ui-or-stored-backend-state",
      "title": "Ensure the upload action only uploads the currently pending selection, clears the pending preview list on successful upload, and does not remove any previously uploaded photos from the gallery UI or stored backend state.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-albums-tab-to-the-authenticated-app-ui-alongside-the-existing-library-experience-keeping-the-ui-mobile-first-and-simple-with-all-user-facing-text-in-english",
      "title": "Add an Albums tab to the authenticated app UI alongside the existing library experience, keeping the UI mobile-first and simple, with all user-facing text in English.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-albums-tab-ui-list-albums-with-an-album-cover-image-and-album-name-support-creating-renaming-and-deleting-albums-from-the-ui",
      "title": "Implement the Albums tab UI: list albums with an album cover image and album name; support creating, renaming, and deleting albums from the UI.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-album-detail-view-opening-an-album-shows-a-photo-grid-for-that-album-and-users-can-add-remove-photos-to-from-the-album-while-photos-remain-in-the-main-library",
      "title": "Implement the Album detail view: opening an album shows a photo grid for that album, and users can add/remove photos to/from the album while photos remain in the main library.",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-project-checkpoint-named-photo-app-stage-2-albums-after-the-albums-feature-is-implemented-and-integrated-end-to-end",
      "title": "Create a project checkpoint named PHOTO_APP_STAGE_2_ALBUMS after the Albums feature is implemented and integrated end-to-end.",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-albums-list-ui-to-render-the-album-cover-using-the-explicit-cover-photo-when-set-otherwise-use-the-first-photo-in-the-album-otherwise-show-the-existing-placeholder-when-the-album-has-no-photos",
      "title": "Update the Albums list UI to render the album cover using the explicit cover photo when set; otherwise use the first photo in the album; otherwise show the existing placeholder when the album has no photos.",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-album-cover-photo-action-in-the-album-detail-view-that-opens-a-chooser-limited-to-photos-in-that-album-and-lets-the-user-select-one-photo-to-set-as-the-album-cover-photo",
      "title": "Add an \"Album Cover Photo\" action in the album detail view that opens a chooser limited to photos in that album, and lets the user select one photo to set as the album cover photo.",
      "reqIds": [
        "REQ-25"
      ],
      "version": 1
    },
    {
      "id": "feature-add-react-query-hooks-mutations-for-setting-an-album-cover-photo-and-ensure-all-relevant-cached-queries-are-invalidated-so-ui-updates-consistently-albums-list-and-album-detail",
      "title": "Add React Query hooks/mutations for setting an album cover photo and ensure all relevant cached queries are invalidated so UI updates consistently (albums list and album detail).",
      "reqIds": [
        "REQ-26"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-editable-caption-ui-in-the-full-screen-photo-viewer-that-lets-the-user-view-and-edit-the-current-photo-s-caption-saving-it-to-the-backend-and-updating-the-ui-state-accordingly",
      "title": "Add an editable caption UI in the full-screen photo viewer that lets the user view and edit the current photo’s caption, saving it to the backend and updating the UI state accordingly.",
      "reqIds": [
        "REQ-29"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-fast-non-ai-search-bar-on-the-home-screen-header-that-locally-filters-already-loaded-data-in-the-library-tab-filter-photos-by-caption-text-and-filename-name-when-available-in-the-albums-tab-filter-albums-by-album-name",
      "title": "Implement a fast, non-AI search bar on the Home screen header that locally filters already-loaded data: in the Library tab, filter photos by caption text and filename/name (when available); in the Albums tab, filter albums by album name.",
      "reqIds": [
        "REQ-30"
      ],
      "version": 1
    },
    {
      "id": "feature-generate-and-add-a-cartoonish-old-camera-favicon-as-a-static-frontend-asset-and-wire-it-into-the-app-html-so-browsers-display-it-as-the-site-favicon",
      "title": "Generate and add a cartoonish old-camera favicon as a static frontend asset, and wire it into the app HTML so browsers display it as the site favicon.",
      "reqIds": [
        "REQ-31"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-project-checkpoint-document-named-photo-app-stage-3-search-after-implementing-search-captions-and-favicon-end-to-end",
      "title": "Create a project checkpoint document named PHOTO_APP_STAGE_3_SEARCH after implementing search, captions, and favicon end-to-end.",
      "reqIds": [
        "REQ-32"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "User authentication: sign up, log in, log out",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Per-user privacy: users can only access their own photos",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Home screen photo grid sorted by newest first with infinite scroll or pagination",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Multi-image upload via an Upload button; show basic error message on upload failure",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "After upload, newly uploaded photos appear immediately at the top of the grid",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Full-screen photo viewer with next/prev navigation opened by tapping a photo",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Delete photo from within the viewer",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Minimal, fast, mobile-first UI using simple components (no AI search/tags/albums yet)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Create backend data model and APIs to support per-user private photo storage keyed by the caller’s Principal, ensuring users can ONLY list, fetch, and delete their own photos.",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Implement backend photo upload endpoints to accept multiple images, persist them, and return created photo metadata sorted by creation time (newest first).",
      "reqIds": [
        "REQ-3"
      ],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Implement backend listing API for a newest-first home grid using either pagination or infinite-scroll style cursoring; the frontend must be able to request the next page reliably.",
      "reqIds": [
        "REQ-4"
      ],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Ensure newly uploaded photos appear immediately at the top of the home grid without requiring a full page refresh.",
      "reqIds": [
        "REQ-7"
      ],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Add simple Albums: create/rename/delete albums; add/remove photos to/from albums without moving them out of the main library; Albums tab with album covers; album view shows a photo grid.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Extend the backend data model to support per-user albums that reference existing photos (photos must remain in the main library and can belong to multiple albums).",
      "reqIds": [
        "REQ-14"
      ],
      "status": "pending"
    },
    {
      "id": "AR-20",
      "summary": "Add backend APIs for albums: create album, rename album, delete album, list albums, add photos to album, and remove photos from album.",
      "reqIds": [
        "REQ-15"
      ],
      "status": "pending"
    },
    {
      "id": "AR-21",
      "summary": "Add backend APIs to fetch the photos in a specific album and support paging in a way compatible with the existing paginated photo grid approach.",
      "reqIds": [
        "REQ-16"
      ],
      "status": "pending"
    },
    {
      "id": "AR-22",
      "summary": "Update backend upgrade/migration logic (if applicable in this project) so existing deployed canister state can be upgraded without data loss, initializing albums to an empty state for all users.",
      "reqIds": [
        "REQ-17"
      ],
      "status": "pending"
    },
    {
      "id": "AR-23",
      "summary": "Allow user to set an explicit album cover photo from within the album detail view via an \"Album Cover Photo\" action; if the selected cover is removed from the album, fall back to the first photo in the album until the user picks a new one.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-24",
      "summary": "Add persisted support for an explicit album cover photo per album, including a backend API to set or change the cover photo to a specific photo that exists in the album.",
      "reqIds": [
        "REQ-22"
      ],
      "status": "pending"
    },
    {
      "id": "AR-25",
      "summary": "Implement automatic fallback behavior for album covers: if an album’s chosen cover photo is removed from the album, the album cover must fall back to the first photo in the album; if the album becomes empty, it has no cover photo.",
      "reqIds": [
        "REQ-23"
      ],
      "status": "pending"
    },
    {
      "id": "AR-29",
      "summary": "If the project uses upgrade-safe persisted album state, add conditional upgrade/migration handling so existing deployed state gains the new album cover photo field without data loss.",
      "reqIds": [
        "REQ-27"
      ],
      "status": "pending"
    },
    {
      "id": "AR-30",
      "summary": "Add a Home-screen search bar that locally filters already-loaded content; search matches album names, photo captions, and filename (if available). No AI; keep it fast and simple.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-31",
      "summary": "Add per-photo editable captions: store caption text in the backend per photo and allow editing from the full-screen photo viewer UI.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-32",
      "summary": "Add a generated cartoonish old-camera favicon to the app.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-33",
      "summary": "Create checkpoint PHOTO_APP_STAGE_3_SEARCH after Search + Captions + favicon are implemented end-to-end.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-34",
      "summary": "Extend the backend photo data model to persist an optional per-photo caption for each user, and expose an authorized API to update (set/clear) the caption for a specific photo owned by the caller.",
      "reqIds": [
        "REQ-28"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Photo Library",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}